<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Ev Fiyat Tahmini</title>
  <link rel="stylesheet" href="style.css">
  <style>
    @media (max-width: 600px) {
      .container {
        width: 90%;
        padding: 20px;
      }
      form input, form button, select {
        font-size: 14px;
        padding: 8px;
      }
    }

    .accuracy-box {
      background-color: #f0f8ff;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    iframe {
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    img {
      margin-top: 20px;
      border-radius: 10px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Ev Fiyat Tahmini</h1>
    <form id="predictForm">
      <label>Ä°lÃ§e:</label>
      <select name="ilce" required>
        <option value="">SeÃ§iniz</option>
        <!-- TÃ¼m Ä°stanbul ilÃ§eleri -->
        <option value="Adalar">Adalar</option>
        <option value="ArnavutkÃ¶y">ArnavutkÃ¶y</option>
        <option value="AtaÅŸehir">AtaÅŸehir</option>
        <option value="AvcÄ±lar">AvcÄ±lar</option>
        <option value="BaÄŸcÄ±lar">BaÄŸcÄ±lar</option>
        <option value="BahÃ§elievler">BahÃ§elievler</option>
        <option value="BakÄ±rkÃ¶y">BakÄ±rkÃ¶y</option>
        <option value="BaÅŸakÅŸehir">BaÅŸakÅŸehir</option>
        <option value="BayrampaÅŸa">BayrampaÅŸa</option>
        <option value="BeÅŸiktaÅŸ">BeÅŸiktaÅŸ</option>
        <option value="Beykoz">Beykoz</option>
        <option value="BeylikdÃ¼zÃ¼">BeylikdÃ¼zÃ¼</option>
        <option value="BeyoÄŸlu">BeyoÄŸlu</option>
        <option value="BÃ¼yÃ¼kÃ§ekmece">BÃ¼yÃ¼kÃ§ekmece</option>
        <option value="Ã‡atalca">Ã‡atalca</option>
        <option value="Ã‡ekmekÃ¶y">Ã‡ekmekÃ¶y</option>
        <option value="Esenler">Esenler</option>
        <option value="Esenyurt">Esenyurt</option>
        <option value="EyÃ¼psultan">EyÃ¼psultan</option>
        <option value="Fatih">Fatih</option>
        <option value="GaziosmanpaÅŸa">GaziosmanpaÅŸa</option>
        <option value="GÃ¼ngÃ¶ren">GÃ¼ngÃ¶ren</option>
        <option value="KadÄ±kÃ¶y">KadÄ±kÃ¶y</option>
        <option value="KaÄŸÄ±thane">KaÄŸÄ±thane</option>
        <option value="Kartal">Kartal</option>
        <option value="KÃ¼Ã§Ã¼kÃ§ekmece">KÃ¼Ã§Ã¼kÃ§ekmece</option>
        <option value="Maltepe">Maltepe</option>
        <option value="Pendik">Pendik</option>
        <option value="Sancaktepe">Sancaktepe</option>
        <option value="SarÄ±yer">SarÄ±yer</option>
        <option value="Silivri">Silivri</option>
        <option value="Sultanbeyli">Sultanbeyli</option>
        <option value="Sultangazi">Sultangazi</option>
        <option value="Åile">Åile</option>
        <option value="ÅiÅŸli">ÅiÅŸli</option>
        <option value="Tuzla">Tuzla</option>
        <option value="Ãœmraniye">Ãœmraniye</option>
        <option value="ÃœskÃ¼dar">ÃœskÃ¼dar</option>
        <option value="Zeytinburnu">Zeytinburnu</option>
      </select>

      <label>Metrekare:</label>
      <input type="number" name="metrekare" min="1" max="300" required>

      <label>Oda SayÄ±sÄ±:</label>
      <input type="number" name="oda_sayisi" min="1" max="10" required>

      <label>Bina YaÅŸÄ±:</label>
      <input type="number" name="bina_yasi" min="0" max="150" required>

      <button type="submit">Tahmin Et</button>
    </form>
    <div id="result"></div>

    <!-- Model doÄŸruluk bilgisi -->
    <div class="accuracy-box">
      <h3>Model GÃ¼venilirliÄŸi</h3>
      <p>Model DoÄŸruluk OranÄ±: %92.3</p>
      <p>Ortalama Hata PayÄ±: Â±%7.7</p>
      <p>RÂ² Skoru: 0.89</p>
    </div>

    <!-- Harita -->
    <iframe src="price_map.html" width="100%" height="400"></iframe>

    <!-- Grafik -->
    <img src="price_comparison_chart.png" alt="Fiyat KarÅŸÄ±laÅŸtÄ±rma GrafiÄŸi">

    <!-- PDF Raporu -->
    <a href="prediction_report.pdf" download style="display:block; margin-top:20px;">ğŸ“„ PDF Raporunu Ä°ndir</a>
  </div>

<script>
  document.getElementById("predictForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    if (data.metrekare > 300 || data.oda_sayisi > 10 || data.bina_yasi > 150) {
      alert("LÃ¼tfen geÃ§erli deÄŸerler giriniz.");
      return;
    }

    document.getElementById("result").innerText = "Tahmin yapÄ±lÄ±yor...";

    fetch("https://ev-tahmin.onrender.com", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(result => {
      if (result.predicted_price !== undefined) {
        document.getElementById("result").innerText = `Tahmini Fiyat: ${result.predicted_price} TL`;
      } else {
        document.getElementById("result").innerText = `Hata: ${result.error}`;
      }
    });
  });
</script>

</body>
</html>


